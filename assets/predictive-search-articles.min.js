function debounce(b,a,d){var c;return function(){var e=this,f=arguments,g=d&&!c;clearTimeout(c);c=setTimeout(function(){c=null;d||b.apply(e,f)},a);g&&b.apply(e,f)}}
class PredictiveSearchArticles extends HTMLElement{constructor(){super();this.input=this.querySelector('input[type="search"]');this.predictiveSearchContainer=document.querySelector(".article_predictive_search");this.predictiveSearchResults=this.querySelector("#predictive-search-articles");this.input.addEventListener("input",debounce(b=>{this.onChange(b)},300).bind(this));void 0!=this.predictiveSearchContainer&&null!=this.predictiveSearchContainer&&(this.input.addEventListener("blur",()=>{"none"==
this.predictiveSearchResults.style.display&&this.predictiveSearchContainer.classList.remove("active")}),this.input.addEventListener("focus",()=>{this.predictiveSearchContainer.classList.add("active")}))}onChange(){const b=this.input.value.trim();b.length?this.getSearchResults(b):this.close()}getSearchResults(b){fetch(`/search/suggest?q=${b}&resources[type]=article,&resources[limit]=4&section_id=predictive-search-articles`).then(a=>{if(!a.ok)throw a=Error(a.status),this.close(),a;return a.text()}).then(a=>
{a=(new DOMParser).parseFromString(a,"text/html").querySelector("#shopify-section-predictive-search-articles").innerHTML;this.predictiveSearchResults.innerHTML=a;this.open()}).catch(a=>{this.close();throw a;})}open(){this.predictiveSearchResults.style.display="block"}close(){this.predictiveSearchResults.style.display="none"}}customElements.define("predictive-search-articles",PredictiveSearchArticles);
